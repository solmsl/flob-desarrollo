<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>1-Elige un fondo para tu carta navideña</title>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="shortcun icon" href="./imagenes/flob-logo.png">
</head>
<body>
    <aside class="text-center">
      <img src="./imagenes/logotipo_flob_con-letra.png" alt="Logo" height="70">
      <p id="letrero"><b>"Por un Diseño Mejor"</b></p>
    </aside>

    <div class="header-step">
      <ul>
          <li class="active form_1_progessbar">
              <div>
                  <p>1</p>
              </div>
          </li>
          <li class="form_2_progessbar">
              <div>
                  <p>2</p>
              </div>
          </li>
          <li class="form_3_progessbar">
              <div>
                  <p>3</p>
              </div>
          </li>
      </ul>
    </div>

    <div class="header-step">
      <ul>
          <li class="active form_1_progessbar">
              <div>
                  <p>Fondo</p>
              </div>
          </li>
          <li class="form_2_progessbar">
              <div>
                  <p>Personalizar</p>
              </div>
          </li>
          <li class="form_3_progessbar">
              <div>
                  <p>Fin</p>
              </div>
          </li>
      </ul>
    </div>

    <section class="card-section">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_10.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_2.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_3.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_4.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_5.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_6.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_7.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_8.png" class="card-img aa-img" alt="...">
              </div>
            </div>
            <div class="col">
              <div class="card"  onclick="selectImg(this)">
                <img src="./plantillasFlob/Background_9.png" class="card-img aa-img" alt="...">
              </div>
            </div>
          </div>
    </section>
    <br>
    <div class="footer-banner" id="footer">
      <button class="btn_siguiente" onclick="siguiente()">Siguiente Paso</button>
    </div>

    <script>
      let cardSeleccionada = null;

      function selectImg(card) {
        const imgElement = card.querySelector('img');

        if (cardSeleccionada === card) {
            card.classList.remove('seleccionada');

            cardSeleccionada = null;

            document.getElementById('footer').style.display = 'none';
            localStorage.removeItem('fondoSeleccionado');
        } else {
          if (cardSeleccionada) {
              cardSeleccionada.classList.remove('seleccionada');
          }
          cardSeleccionada = card;
          cardSeleccionada.classList.add('seleccionada');
          document.getElementById('footer').style.display = 'block';

          setTimeout(() => {
              const canvas = document.createElement('canvas');
              const ctx = canvas.getContext('2d');
              canvas.width = imgElement.naturalWidth;
              canvas.height = imgElement.naturalHeight;
              ctx.drawImage(imgElement, 0, 0);

              //convertir la imagen a base64
              const base64String = canvas.toDataURL();
              localStorage.setItem('fondoSeleccionado', base64String);
          }, 0);
        }
      }

      function siguiente() {
        window.location.href = 'paso-dos.html';
      }
    </script>

</body>
</html>
